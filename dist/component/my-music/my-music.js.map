{"version":3,"sources":["component/my-music/my-music.js"],"names":["app","getApp","Component","properties","data","show","lifetimes","ready","that","gs","setData","musicPlay","wx","playBackgroundAudio","dataUrl","music","title","name","coverImgUrl","image","cloud","getMusic","then","su","res","musicList","methods","_playMusic","e","currentTarget","dataset","index","currentIndex","stopBackgroundAudio","_showMusic"],"mappings":";;AAAA;AACA;AACA;AACA,IAAMA,MAAMC,QAAZ;AACAC,UAAU;AACRC,cAAY,EADJ;AAERC,QAAM;AACJC,UAAM;AADF,GAFE;AAKRC,aAAW;AACTC,SADS,mBACA;AACP,UAAIC,OAAO,IAAX;AACA,UAAIR,IAAIS,EAAJ,CAAO,WAAP,CAAJ,EAAyB;AACvB,aAAKC,OAAL,CAAa;AACXC,qBAAWX,IAAIS,EAAJ,CAAO,WAAP;AADA,SAAb;AAGAG,WAAGC,mBAAH,CAAuB;AACrBC,mBAASd,IAAIS,EAAJ,CAAO,WAAP,EAAoBM,KADR;AAErBC,iBAAOhB,IAAIS,EAAJ,CAAO,WAAP,EAAoBQ,IAFN;AAGrBC,uBAAalB,IAAIS,EAAJ,CAAO,WAAP,EAAoBU;AAHZ,SAAvB;AAKD;AACD,UAAI,CAACnB,IAAIS,EAAJ,CAAO,WAAP,CAAL,EAA0B;AACxBT,YAAIoB,KAAJ,GAAYC,QAAZ,GAAuBC,IAAvB,CAA4B,eAAO;AACjCtB,cAAIuB,EAAJ,CAAO,WAAP,EAAoBC,GAApB;AACAhB,eAAKE,OAAL,CAAa;AACXe,uBAAWD;AADA,WAAb;AAGD,SALD;AAMD,OAPD,MAOO;AACL,aAAKd,OAAL,CAAa;AACXe,qBAAWzB,IAAIS,EAAJ,CAAO,WAAP;AADA,SAAb;AAGD;AACF;AAzBQ,GALH;AAgCRiB,WAAS;AACPC,cADO,sBACKC,CADL,EACQ;AACb,UAAIA,EAAEC,aAAF,CAAgBC,OAAhB,CAAwBC,KAAxB,IAAiC,KAAK3B,IAAL,CAAU4B,YAA/C,EAA6D;AAC3DpB,WAAGqB,mBAAH;AACA,aAAKvB,OAAL,CAAa;AACXC,qBAAW,IADA;AAEXqB,wBAAc,CAAC;AAFJ,SAAb;AAIA;AACD;AACDpB,SAAGC,mBAAH,CAAuB;AACrBC,iBAAS,KAAKV,IAAL,CAAUqB,SAAV,CAAoBG,EAAEC,aAAF,CAAgBC,OAAhB,CAAwBC,KAA5C,EAAmDhB,KADvC;AAErBC,eAAO,KAAKZ,IAAL,CAAUqB,SAAV,CAAoBG,EAAEC,aAAF,CAAgBC,OAAhB,CAAwBC,KAA5C,EAAmDd,IAFrC;AAGrBC,qBAAa,KAAKd,IAAL,CAAUqB,SAAV,CAAoBG,EAAEC,aAAF,CAAgBC,OAAhB,CAAwBC,KAA5C,EAAmDZ;AAH3C,OAAvB;AAKAnB,UAAIuB,EAAJ,CAAO,WAAP,EAAoB,KAAKnB,IAAL,CAAUqB,SAAV,CAAoBG,EAAEC,aAAF,CAAgBC,OAAhB,CAAwBC,KAA5C,CAApB;AACA,WAAKrB,OAAL,CAAa;AACXsB,sBAAcJ,EAAEC,aAAF,CAAgBC,OAAhB,CAAwBC,KAD3B;AAEXpB,mBAAW,KAAKP,IAAL,CAAUqB,SAAV,CAAoBG,EAAEC,aAAF,CAAgBC,OAAhB,CAAwBC,KAA5C;AAFA,OAAb;AAID,KApBM;AAqBPG,cArBO,wBAqBO;AACZ,WAAKxB,OAAL,CAAa;AACXL,cAAM,CAAC,KAAKD,IAAL,CAAUC;AADN,OAAb;AAGD;AAzBM;AAhCD,CAAV","file":"my-music.js","sourcesContent":["// components/component-tag-name.js\r\n// const app = getApp()\r\n/*eslint-disable*/\r\nconst app = getApp()\r\nComponent({\r\n  properties: {},\r\n  data: {\r\n    show: false\r\n  },\r\n  lifetimes: {\r\n    ready () {\r\n      let that = this\r\n      if (app.gs('musicPlay')) {\r\n        this.setData({\r\n          musicPlay: app.gs('musicPlay')\r\n        })\r\n        wx.playBackgroundAudio({\r\n          dataUrl: app.gs('musicPlay').music,\r\n          title: app.gs('musicPlay').name,\r\n          coverImgUrl: app.gs('musicPlay').image\r\n        })\r\n      }\r\n      if (!app.gs('musicList')) {\r\n        app.cloud().getMusic().then(res => {\r\n          app.su('musicList', res)\r\n          that.setData({\r\n            musicList: res\r\n          })\r\n        })\r\n      } else {\r\n        this.setData({\r\n          musicList: app.gs('musicList')\r\n        })\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    _playMusic (e) {\r\n      if (e.currentTarget.dataset.index == this.data.currentIndex) {\r\n        wx.stopBackgroundAudio()\r\n        this.setData({\r\n          musicPlay: null,\r\n          currentIndex: -1\r\n        })\r\n        return\r\n      }\r\n      wx.playBackgroundAudio({\r\n        dataUrl: this.data.musicList[e.currentTarget.dataset.index].music,\r\n        title: this.data.musicList[e.currentTarget.dataset.index].name,\r\n        coverImgUrl: this.data.musicList[e.currentTarget.dataset.index].image\r\n      })\r\n      app.su('musicPlay', this.data.musicList[e.currentTarget.dataset.index])\r\n      this.setData({\r\n        currentIndex: e.currentTarget.dataset.index,\r\n        musicPlay: this.data.musicList[e.currentTarget.dataset.index]\r\n      })\r\n    },\r\n    _showMusic () {\r\n      this.setData({\r\n        show: !this.data.show\r\n      })\r\n    }\r\n  }\r\n})\r\n"]}