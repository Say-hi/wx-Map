{"version":3,"sources":["pages/expressJump/expressJump.js"],"names":["baseUrl","getExpressBy100","Page","data","title","callPhone","e","wx","makePhoneCall","phoneNumber","currentTarget","dataset","phone","save","list","getStorageSync","item","nubmer","number","showModal","tilte","content","showCancel","obj","company","expressInfo","logisticCode","traces","unshift","setStorageSync","onLoad","that","setData","url","success","res","console","log","acceptStation","result","reg","str","match","request","onReady","onShow","onHide","onUnload","onPullDownRefresh"],"mappings":";;AAAA;AACA;AACA,IAAMA,UAAU,yCAAhB;AACA,IAAMC,kBAAkB,kBAAxB;AACA;AACAC,KAAK;AACH;;;AAGAC,QAAM;AACJC,WAAO;AADH,GAJH;AAOH;;;;AAIAC,WAXG,qBAWQC,CAXR,EAWW;AACZ;AACA;AACAC,OAAGC,aAAH,CAAiB;AACfC,mBAAaH,EAAEI,aAAF,CAAgBC,OAAhB,CAAwBC;AADtB,KAAjB;AAGD,GAjBE;;AAkBH;;;AAGAC,MArBG,kBAqBK;AACN,QAAIC,OAAOP,GAAGQ,cAAH,CAAkB,UAAlB,KAAiC,EAA5C;AACA,SAAK,IAAIC,IAAT,IAAiBF,IAAjB,EAAuB;AACrB,UAAIA,KAAKE,IAAL,EAAWC,MAAX,KAAsB,KAAKd,IAAL,CAAUe,MAApC,EAA4C;AAC1C,eAAOX,GAAGY,SAAH,CAAa;AAClBC,iBAAO,MADW;AAElBC,mBAAS,eAFS;AAGlBC,sBAAY;AAHM,SAAb,CAAP;AAKD;AACF;AACD,QAAIC,MAAM;AACRN,cAAQ,KAAKd,IAAL,CAAUe,MADV;AAERM,eAAS,KAAKrB,IAAL,CAAUsB,WAAV,CAAsBC,YAFvB;AAGRC,cAAQ,KAAKxB,IAAL,CAAUsB,WAAV,CAAsBE,MAAtB,CAA6B,CAA7B;AAHA,KAAV;AAKA;AACAb,SAAKc,OAAL,CAAaL,GAAb;AACAhB,OAAGsB,cAAH,CAAkB,UAAlB,EAA8Bf,IAA9B;AACAP,OAAGY,SAAH,CAAa;AACXC,aAAO,MADI;AAEXC,eAAS,UAFE;AAGXC,kBAAY;AAHD,KAAb;AAKD,GA7CE;;AA8CH;;;AAGAQ,QAjDG,kBAiDKxB,CAjDL,EAiDQ;AACT,QAAIyB,OAAO,IAAX;AACA,SAAKC,OAAL,CAAa;AACXd,cAAQZ,EAAEY;AADC,KAAb;AAGA,QAAIK,MAAM;AACRU,WAAKjC,UAAUC,eAAV,GAA4B,eAA5B,GAA8CK,EAAEY,MAD7C;AAERgB,aAFQ,mBAECC,GAFD,EAEM;AACZC,gBAAQC,GAAR,CAAYF,GAAZ;AACA,YAAI,CAACA,IAAIhC,IAAJ,CAASA,IAAd,EAAoB;AAClB,cAAIoB,OAAM;AACRG,0BAAc,WADN;AAERC,oBAAQ,CAAC,EAACW,eAAe,uBAAhB,EAAD;AAFA,WAAV;AAIAP,eAAKC,OAAL,CAAa;AACXP,yBAAaF;AADF,WAAb;AAGA;AACD;AACD,YAAIgB,SAASJ,IAAIhC,IAAJ,CAASA,IAAtB;AACA,YAAIqC,MAAM,aAAV;AACA,aAAK,IAAIxB,IAAT,IAAiBuB,OAAOZ,MAAxB,EAAgC;AAC9B,cAAIc,MAAMF,OAAOZ,MAAP,CAAcX,IAAd,EAAoBsB,aAA9B;AACA;AACA,cAAI1B,QAAQ6B,IAAIC,KAAJ,CAAUF,GAAV,CAAZ;AACA;AACA,cAAI5B,KAAJ,EAAW;AACT2B,mBAAOZ,MAAP,CAAcX,IAAd,EAAoBJ,KAApB,GAA4BA,MAAM,CAAN,CAA5B;AACD;AACF;AACDmB,aAAKC,OAAL,CAAa;AACXP,uBAAac;AADF,SAAb;AAGD;AA5BO,KAAV;AA8BAhC,OAAGoC,OAAH,CAAWpB,GAAX;AACD,GArFE;;;AAuFH;;;AAGAqB,SA1FG,qBA0FQ;AACT;AACD,GA5FE;;;AA8FH;;;AAGAC,QAjGG,oBAiGO;AACR;AACD,GAnGE;;;AAqGH;;;AAGAC,QAxGG,oBAwGO;AACR;AACD,GA1GE;;;AA4GH;;;AAGAC,UA/GG,sBA+GS;AACV;AACD,GAjHE;;;AAmHH;;;AAGAC,mBAtHG,+BAsHkB;AACnB;AACD;AAxHE,CAAL","file":"expressJump.js","sourcesContent":["// 获取全局应用程序实例对象\r\n// const app = getApp()\r\nconst baseUrl = 'https://qf-restapi.mdscj.com/xp_express'\r\nconst getExpressBy100 = '/kuaidi100/query'\r\n// 创建页面实例对象\r\nPage({\r\n  /**\r\n   * 页面的初始数据\r\n   */\r\n  data: {\r\n    title: 'expressJump'\r\n  },\r\n  /**\r\n   * 拨打电话\r\n   * @param e\r\n   */\r\n  callPhone (e) {\r\n    // console.log(e)\r\n    // console.log(1)\r\n    wx.makePhoneCall({\r\n      phoneNumber: e.currentTarget.dataset.phone\r\n    })\r\n  },\r\n  /**\r\n   * 存储记录\r\n   */\r\n  save () {\r\n    let list = wx.getStorageSync('saveList') || []\r\n    for (var item in list) {\r\n      if (list[item].nubmer === this.data.number) {\r\n        return wx.showModal({\r\n          tilte: '已有信息',\r\n          content: '亲爱的小主，您已经保存过啦',\r\n          showCancel: false\r\n        })\r\n      }\r\n    }\r\n    let obj = {\r\n      nubmer: this.data.number,\r\n      company: this.data.expressInfo.logisticCode,\r\n      traces: this.data.expressInfo.traces[0]\r\n    }\r\n    // console.log(obj)\r\n    list.unshift(obj)\r\n    wx.setStorageSync('saveList', list)\r\n    wx.showModal({\r\n      tilte: '保存成功',\r\n      content: '以保存该快递记录',\r\n      showCancel: false\r\n    })\r\n  },\r\n  /**\r\n   * 生命周期函数--监听页面加载\r\n   */\r\n  onLoad (e) {\r\n    let that = this\r\n    this.setData({\r\n      number: e.number\r\n    })\r\n    let obj = {\r\n      url: baseUrl + getExpressBy100 + '?logisticsNo=' + e.number,\r\n      success (res) {\r\n        console.log(res)\r\n        if (!res.data.data) {\r\n          let obj = {\r\n            logisticCode: '请检查您的快递单号',\r\n            traces: [{acceptStation: '未查询到该快递单号信息，请检查您的快递单号'}]\r\n          }\r\n          that.setData({\r\n            expressInfo: obj\r\n          })\r\n          return\r\n        }\r\n        var result = res.data.data\r\n        var reg = /(\\d{11,20})/\r\n        for (var item in result.traces) {\r\n          let str = result.traces[item].acceptStation\r\n          // console.log(str)\r\n          let phone = str.match(reg)\r\n          // console.log(phone)\r\n          if (phone) {\r\n            result.traces[item].phone = phone[0]\r\n          }\r\n        }\r\n        that.setData({\r\n          expressInfo: result\r\n        })\r\n      }\r\n    }\r\n    wx.request(obj)\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面初次渲染完成\r\n   */\r\n  onReady () {\r\n    // TODO: onReady\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面显示\r\n   */\r\n  onShow () {\r\n    // TODO: onShow\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面隐藏\r\n   */\r\n  onHide () {\r\n    // TODO: onHide\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面卸载\r\n   */\r\n  onUnload () {\r\n    // TODO: onUnload\r\n  },\r\n\r\n  /**\r\n   * 页面相关事件处理函数--监听用户下拉动作\r\n   */\r\n  onPullDownRefresh () {\r\n    // TODO: onPullDownRefresh\r\n  }\r\n})\r\n"]}