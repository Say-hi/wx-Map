{"version":3,"sources":["pagesOne/pages/call/call.js"],"names":["timer","timer2","audio","Page","data","randomName","randomRemark","soundUrl","back","wx","navigateBack","delta","answer","that","setData","clearInterval","destroy","createInnerAudioContext","autoplay","obeyMuteSwitch","src","onPlay","getTime","setInterval","onEnded","time","Math","floor","currentTime","m","s","onLoad","options","type","reLaunch","url","loop","onReady","onShow","vibrateLong","onHide","onUnload","onPullDownRefresh"],"mappings":";;AAAA;AACA;AACA,IAAIA,QAAQ,IAAZ;AACA,IAAIC,SAAS,IAAb;AACA,IAAIC,QAAQ,IAAZ;;AAEA;AACAC,KAAK;AACH;;;AAGAC,QAAM;AACJC,gBAAY,SADR;AAEJC,kBAAc,SAFV;AAGJC,cAAU;AAHN,GAJH;AASHC,MATG,kBASK;AACNC,OAAGC,YAAH,CAAgB;AACdC,aAAO;AADO,KAAhB;AAGD,GAbE;AAcHC,QAdG,oBAcO;AACR,QAAIC,OAAO,IAAX;AACA,SAAKC,OAAL,CAAa;AACXF,cAAQ;AADG,KAAb;AAGAG,kBAAcf,KAAd;AACA,QAAIE,KAAJ,EAAWA,MAAMc,OAAN;AACXd,YAAQO,GAAGQ,uBAAH,EAAR;AACAf,UAAMgB,QAAN,GAAiB,IAAjB;AACAhB,UAAMiB,cAAN,GAAuB,KAAvB;AACAjB,UAAMkB,GAAN,GAAY,KAAKhB,IAAL,CAAUG,QAAtB;AACAL,UAAMmB,MAAN,CAAa,YAAM;AACjBR,WAAKC,OAAL,CAAa;AACXR,sBAAcO,KAAKS,OAAL;AADH,OAAb;AAGArB,eAASsB,YAAY,YAAM;AACzBV,aAAKC,OAAL,CAAa;AACXR,wBAAcO,KAAKS,OAAL;AADH,SAAb;AAGD,OAJQ,EAIN,GAJM,CAAT;AAKD,KATD;AAUApB,UAAMsB,OAAN,CAAc,YAAM;AAClBX,WAAKL,IAAL;AACD,KAFD;AAGD,GAtCE;AAuCHc,SAvCG,qBAuCQ;AACT,QAAIG,OAAOC,KAAKC,KAAL,CAAWzB,MAAM0B,WAAjB,CAAX;AACA,QAAIC,IAAIH,KAAKC,KAAL,CAAWF,OAAO,EAAlB,CAAR;AACA,QAAIK,IAAIJ,KAAKC,KAAL,CAAWF,OAAO,EAAlB,CAAR;AACA,WAAO,CAACI,IAAI,EAAJ,GAAS,MAAMA,CAAf,GAAmBA,CAApB,IAAyB,GAAzB,IAAgCC,IAAI,EAAJ,GAAS,MAAMA,CAAf,GAAmBA,CAAnD,CAAP;AACD,GA5CE;;AA6CH;;;AAGAC,QAhDG,kBAgDKC,OAhDL,EAgDc;AACf,QAAIA,QAAQC,IAAR,KAAiB,UAArB,EAAiC;AAC/B,WAAKzB,IAAL,GAAY,YAAY;AACtBC,WAAGyB,QAAH,CAAY;AACVC,eAAK;AADK,SAAZ;AAGD,OAJD;AAKD;AACD,SAAKrB,OAAL,CAAa;AACXT,kBAAY2B,QAAQ3B,UADT;AAEXC,oBAAc0B,QAAQ1B,YAFX;AAGXC,gBAAUyB,QAAQzB;AAHP,KAAb;AAKAL,YAAQO,GAAGQ,uBAAH,EAAR;AACAf,UAAMgB,QAAN,GAAiB,IAAjB;AACAhB,UAAMkC,IAAN,GAAa,IAAb;AACAlC,UAAMiB,cAAN,GAAuB,KAAvB;AACAjB,UAAMkB,GAAN,GAAY,mDAAZ;AACD,GAlEE;;AAmEH;;;AAGAiB,SAtEG,qBAsEQ;AACT;AACD,GAxEE;;;AA0EH;;;AAGAC,QA7EG,oBA6EO;AACRtC,YAAQuB,YAAY,YAAM;AACxBd,SAAG8B,WAAH;AACD,KAFO,EAEL,IAFK,CAAR;AAGD,GAjFE;;;AAmFH;;;AAGAC,QAtFG,oBAsFO;AACR;AACD,GAxFE;;;AA0FH;;;AAGAC,UA7FG,sBA6FS;AACV,QAAIzC,KAAJ,EAAWe,cAAcf,KAAd;AACX,QAAIC,MAAJ,EAAYc,cAAcd,MAAd;AACZ,QAAIC,KAAJ,EAAWA,MAAMc,OAAN;AACZ,GAjGE;;;AAmGH;;;AAGA0B,mBAtGG,+BAsGkB;AACnB;AACD;AAxGE,CAAL","file":"call.js","sourcesContent":["// 获取全局应用程序实例对象\n// const app = getApp()\nlet timer = null\nlet timer2 = null\nlet audio = null\n\n// 创建页面实例对象\nPage({\n  /**\n   * 页面的初始数据\n   */\n  data: {\n    randomName: 'MY LOVE',\n    randomRemark: 'MY LOVE',\n    soundUrl: 'https://c.jiangwenqiang.com/music/glgl.mp3'\n  },\n  back () {\n    wx.navigateBack({\n      delta: 1\n    })\n  },\n  answer () {\n    let that = this\n    this.setData({\n      answer: true\n    })\n    clearInterval(timer)\n    if (audio) audio.destroy()\n    audio = wx.createInnerAudioContext()\n    audio.autoplay = true\n    audio.obeyMuteSwitch = false\n    audio.src = this.data.soundUrl\n    audio.onPlay(() => {\n      that.setData({\n        randomRemark: that.getTime()\n      })\n      timer2 = setInterval(() => {\n        that.setData({\n          randomRemark: that.getTime()\n        })\n      }, 500)\n    })\n    audio.onEnded(() => {\n      that.back()\n    })\n  },\n  getTime () {\n    let time = Math.floor(audio.currentTime)\n    let m = Math.floor(time / 60)\n    let s = Math.floor(time % 60)\n    return (m < 10 ? '0' + m : m) + ':' + (s < 10 ? '0' + s : s)\n  },\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad (options) {\n    if (options.type !== 'needback') {\n      this.back = function () {\n        wx.reLaunch({\n          url: '../phone/phone'\n        })\n      }\n    }\n    this.setData({\n      randomName: options.randomName,\n      randomRemark: options.randomRemark,\n      soundUrl: options.soundUrl\n    })\n    audio = wx.createInnerAudioContext()\n    audio.autoplay = true\n    audio.loop = true\n    audio.obeyMuteSwitch = false\n    audio.src = 'https://sound-static.cqxcx.net/fool/Despacito.mp3'\n  },\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady () {\n    // TODO: onReady\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow () {\n    timer = setInterval(() => {\n      wx.vibrateLong()\n    }, 1200)\n  },\n\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide () {\n    // TODO: onHide\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload () {\n    if (timer) clearInterval(timer)\n    if (timer2) clearInterval(timer2)\n    if (audio) audio.destroy()\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh () {\n    // TODO: onPullDownRefresh\n  }\n})\n"]}